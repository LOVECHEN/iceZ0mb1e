                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.8.0 #10562 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module mini_string
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _mini_memset
                             12 	.globl _mini_strlen
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ; ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; ram data
                             22 ;--------------------------------------------------------
                             23 	.area _INITIALIZED
                             24 ;--------------------------------------------------------
                             25 ; absolute external ram data
                             26 ;--------------------------------------------------------
                             27 	.area _DABS (ABS)
                             28 ;--------------------------------------------------------
                             29 ; global & static initialisations
                             30 ;--------------------------------------------------------
                             31 	.area _HOME
                             32 	.area _GSINIT
                             33 	.area _GSFINAL
                             34 	.area _GSINIT
                             35 ;--------------------------------------------------------
                             36 ; Home
                             37 ;--------------------------------------------------------
                             38 	.area _HOME
                             39 	.area _HOME
                             40 ;--------------------------------------------------------
                             41 ; code
                             42 ;--------------------------------------------------------
                             43 	.area _CODE
                             44 ;mini-string/mini-string.c:29: void mini_memset(uint8_t *ptr, uint8_t value, uint16_t len )
                             45 ;	---------------------------------
                             46 ; Function mini_memset
                             47 ; ---------------------------------
   0000                      48 _mini_memset::
                             49 ;mini-string/mini-string.c:33: for(i = 0; i < len; i++)
   0000 01 00 00      [10]   50 	ld	bc, #0x0000
   0003                      51 00103$:
   0003 21 05 00      [10]   52 	ld	hl, #5
   0006 39            [11]   53 	add	hl, sp
   0007 79            [ 4]   54 	ld	a, c
   0008 96            [ 7]   55 	sub	a, (hl)
   0009 78            [ 4]   56 	ld	a, b
   000A 23            [ 6]   57 	inc	hl
   000B 9E            [ 7]   58 	sbc	a, (hl)
   000C D0            [11]   59 	ret	NC
                             60 ;mini-string/mini-string.c:35: ptr[i] = value;
   000D 21 02 00      [10]   61 	ld	hl, #2
   0010 39            [11]   62 	add	hl, sp
   0011 7E            [ 7]   63 	ld	a, (hl)
   0012 23            [ 6]   64 	inc	hl
   0013 66            [ 7]   65 	ld	h, (hl)
   0014 6F            [ 4]   66 	ld	l, a
   0015 09            [11]   67 	add	hl, bc
   0016 FD 21 04 00   [14]   68 	ld	iy, #4
   001A FD 39         [15]   69 	add	iy, sp
   001C FD 7E 00      [19]   70 	ld	a, 0 (iy)
   001F 77            [ 7]   71 	ld	(hl), a
                             72 ;mini-string/mini-string.c:33: for(i = 0; i < len; i++)
   0020 03            [ 6]   73 	inc	bc
                             74 ;mini-string/mini-string.c:37: }
   0021 18 E0         [12]   75 	jr	00103$
                             76 ;mini-string/mini-string.c:39: uint16_t mini_strlen(char *ptr)
                             77 ;	---------------------------------
                             78 ; Function mini_strlen
                             79 ; ---------------------------------
   0023                      80 _mini_strlen::
   0023 CDr00r00      [17]   81 	call	___sdcc_enter_ix
                             82 ;mini-string/mini-string.c:43: for(i = 0; i < 0xFFFF; i++)
   0026 01 00 00      [10]   83 	ld	bc, #0x0000
   0029 11 00 00      [10]   84 	ld	de, #0x0000
   002C                      85 00104$:
                             86 ;mini-string/mini-string.c:45: if( ptr[i] == 0 )
   002C DD 6E 04      [19]   87 	ld	l, 4 (ix)
   002F DD 66 05      [19]   88 	ld	h, 5 (ix)
   0032 19            [11]   89 	add	hl, de
   0033 7E            [ 7]   90 	ld	a, (hl)
   0034 B7            [ 4]   91 	or	a, a
   0035 20 04         [12]   92 	jr	NZ,00105$
                             93 ;mini-string/mini-string.c:47: return i;
   0037 69            [ 4]   94 	ld	l, c
   0038 60            [ 4]   95 	ld	h, b
   0039 18 0E         [12]   96 	jr	00106$
   003B                      97 00105$:
                             98 ;mini-string/mini-string.c:43: for(i = 0; i < 0xFFFF; i++)
   003B 13            [ 6]   99 	inc	de
   003C 4B            [ 4]  100 	ld	c, e
   003D 42            [ 4]  101 	ld	b, d
   003E 7B            [ 4]  102 	ld	a, e
   003F D6 FF         [ 7]  103 	sub	a, #0xff
   0041 7A            [ 4]  104 	ld	a, d
   0042 DE FF         [ 7]  105 	sbc	a, #0xff
   0044 38 E6         [12]  106 	jr	C,00104$
                            107 ;mini-string/mini-string.c:51: return 0;
   0046 21 00 00      [10]  108 	ld	hl, #0x0000
   0049                     109 00106$:
                            110 ;mini-string/mini-string.c:52: }
   0049 DD E1         [14]  111 	pop	ix
   004B C9            [10]  112 	ret
                            113 	.area _CODE
                            114 	.area _INITIALIZER
                            115 	.area _CABS (ABS)
